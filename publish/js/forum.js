"use strict";var waterfall=document.getElementById("waterfall"),lisArr=[],heightArr=[],imgsArr=[],liWidth=0;function render(){waterfall.innerHTML="",lisArr=[],heightArr=[];var t=0,e=window.innerWidth;liWidth=1300<=e?(waterfall.style.width="1200px",t=6,200):950<=e?(waterfall.style.width="900px",t=5,180):(waterfall.style.width="700px",t=4,175);for(var i=0;i<t;i++){var r=document.createElement("li");heightArr.push(0),lisArr.push(r),waterfall.appendChild(r)}imgsArr.forEach(function(t){var e=Math.min.apply("",heightArr),i=heightArr.indexOf(e);lisArr[i].appendChild(t),heightArr[i]+=+t.getAttribute("data-height")})}window.onresize=function(){render()},render();var num=1;function sendAjax(t){QF.get("/data/0"+t+".json",{},function(t){console.log(t),t.pins.forEach(function(t){var e=document.createElement("div");e.setAttribute("data-height",t.file.height),e.setAttribute("data-width",t.file.width),e.innerHTML='\n                    <div class=\'item\'>\n                        <div class="img">\n                            <img src="//hbimg.huabanimg.com/'+t.file.key+'_/fw/480/format/webp" />\n                        </div>\n                        <p class="title">\n                        '+t.board.title+'\n                        </p>\n                        <div class="author">\n                            '+t.user.username+"\n                        </div>\n                    </div>\n                ",imgsArr.push(e)}),imgsArr.forEach(function(t){var e=Math.min.apply("",heightArr),i=heightArr.indexOf(e);lisArr[i].appendChild(t),heightArr[i]+=+t.getAttribute("data-height")*liWidth/t.getAttribute("data-width")}),num++})}sendAjax(num);var timer=null;window.onscroll=function(){var t=document.body.scrollTop||document.documentElement.scrollTop,e=window.innerHeight;document.body.clientHeight-t-e<500&&(clearTimeout(timer),timer=setTimeout(function(){sendAjax(num)},200))};